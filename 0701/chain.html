<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>chain</title>
</head>

<body>
  <script>
    // (4 + 3) * 2 - 1 = 13

    // callback
    /*
    function add(num1, num2, callback) {
      setTimeout(() => {
        const result = num1 + num2;
        callback(result)
      }, 1000);
    }

    function mul(num, callback) {
      setTimeout(() => {
        const result = num * 2;
        callback(result);
      }, 700);
    }

    function sub(num, callback) {
      setTimeout(() => {
        const result = num - 1;
        callback(result);
      }, 500);
    }

    // 실행
    add(4, 3, function (x) {
      console.log('1 : ', x);
      mul(x, function (y) {
        console.log('2 : ', y);
        sub(y, function (z) {
          console.log('3 : ', z)
        })
      })
    })
*/


    // promise
    // let result = 0;
    function add(num1, num2){
      return new Promise((resolve) => {
        setTimeout(() => {
          const result = num1 + num2;
          resolve(result);
        }, 1000);
      })
    }

    function mul(num){
      return new Promise((resolve, reject) => {
        setTimeout(() => {
         const result = num * 2;
          resolve(result);
        }, 700);
      })
    }

    function sub(num){
      return new Promise((resolve, reject) => {
        setTimeout(() => {
         const result = num - 1;
          resolve(result);
        }, 500);
      })
    }

    // 실행
    /*
    add(4,3).then(function (res){
      console.log('add : ', res);
      return mul(res);
    }).then(function(res1){
      console.log('mul : ', res1);
      return sub(res1);
    }).then(function(res2){
      console.log('sub : ', res2);
    });
*/
    // add(4,3).then(result)

    

// 실습 1

function call(name){
  return new Promise((resolve, reject) => {
    setTimeout(() => {
      console.log(name);
      resolve(name);
    }, 1000);
  }) 
}

function back(){
  return new Promise((resolve, reject) => {
    setTimeout(() => {
      console.log('back');
      resolve('back');
    }, 1000);
  })
}

function hell(){
  return new Promise((resolve, reject) => {
    setTimeout(() => {
      resolve('callback hell');
    }, 1000);
  })
}
/*
call('kim').then(function (name){
  console.log(name, '반가워');
  return back();
}).then(function(text) {
  console.log(text, '을 실행했구나');
  return hell();
}).then(function(message){
  console.log('여기는', message);
})
*/


// 실습2
async function exec(){
  const name =  await call('kim');
  console.log(name, '반가워');
  const txt = await back()
  console.log( txt, '을 실행했구나');
  const b = await hell();
  console.log('여기는', b);
}

exec();

  </script>
</body>

</html>